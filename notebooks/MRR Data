import numpy as np
import matplotlib.pyplot as plt
import xarray as xr
from netCDF4 import Dataset
import netCDF4
import pyart
import pandas as pd
import cartopy.crs as ccrs
import cartopy.feature as cfeature
import metpy
MRR_read_in = Dataset('/Users/adamabdelhak/Downloads/MRR-Pro/mrr.nc')
MRR_read_in
time = MRR_read_in['time'][:]
time = np.array(netCDF4.num2date(time, units = 'seconds since 2022-01-17 00:00:00'),dtype = 'datetime64[ns]')
reflectivity = MRR_read_in['spectrum_raw'][:]
radar = MRR_read_in['range'][:]
length = len(radar)

for i in range (length):
    st = pd.to_datetime(radar[i][0])
    et = pd.to_datetime(radar[i][1])
    itx = np.where((time > st)&(time < et))[0]
    fig,ax = plt.subplots(figsize = (15,5))
    ax.plot(time[itx],reflectivity[itx])
    ax.set_xlim(st,et)
    ax.set_xlabel('Time'), ax.set_ylabel('Reflectivity')
    plt.show()
    print(itx)
